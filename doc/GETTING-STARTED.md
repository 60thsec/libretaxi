# Getting started

You cloned repository already and you want to start. Okay, let's go together
through all the steps.

## Step 1. Environment

```bash
cp .env-sample .env
```

Command above will copy sample environment configuration to `.env`. It's required
to have your own `.env`.

In this file you'll see your pre-defined database connection. It should work,
but make sure you have your own credentials file outside this project and
your own url. Shared development environment is not a good thing.

## Step 2. Database connection and credentials

Note: you can skip this step for quick start.

You'll find `./cheaptaxi-staging-credentials.json`. You should be good to go with this file, it contains sample credentials generated by author of this software. It's not required, but it's highly recommended to generate your own file.

At the moment there are no instructions on how to generate `./cheaptaxi-staging-credentials.json`. Docs to be added later (or feel free to add).

Also, make sure you have firebase indexes on `users.q`. If you don't have indexes, software will work anyway, but you may see the following warning:

> FIREBASE WARNING: Using an unspecified index. Consider adding ".indexOn": "g" at /users to your security rules for better performance

Here is how you can enable index. Add the following two lines into your `rules` section on [this page](https://console.firebase.google.com/project/cheaptaxi-staging/database/rules):

```
"users": {
  ".indexOn": "g"
}
```

(`g` stands for "geofire" - library used to search by geo location).

So your configuration will look like this:

```
{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    "users": {
      ".indexOn": "g"
    }
  }
}
```

Screenshot:

![image](https://cloud.githubusercontent.com/assets/1477672/18611416/2591e534-7ced-11e6-9fd4-240385778d89.png)



## Step 3. Telegram tokens

You don't need to configure Telegram tokens, because handlers are not implemented
at the moment.

## Step 2. Add changes to your `hosts` file.

Make sure `127.0.0.1 localhost.firebaseio.test` is specified in your `/etc/hosts`.
It's required for tests. Don't worry, if you won't specify this, `before-all` test
will fail.

See also:

* [Docs for firebase-server](https://github.com/urish/firebase-server/blob/master/README.md) -
package that we use to mock Firebase for local tests.

## Step 3. Install Redis.

Redis installation is covered in [REDIS.md](REDIS.md). Nothing fancy here. `before-all` test
will fail if you did something wrong.

## You're good now!

When everything's done, it's time to test and run:

* `npm test` - Run tests. All tests should pass.
* `npm start` - Start application. At the moment it starts CLI interface only. Telegram
  handlers are not there, and we're working hard on adding them! Stay tuned.

## Still have issues?

Yes, I know we should use Docker, Vagrant or something else. If you feel enthusiastic
go ahead and add it! Explain in detail how to use it and create your own repo!
